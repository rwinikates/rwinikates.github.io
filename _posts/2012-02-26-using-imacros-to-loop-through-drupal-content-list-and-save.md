---
layout: post
title: "Using iMacros to loop through Drupal content list and save"
date: 2012-02-26 16:17
permalink: blog/using-imacros-loop-through-drupal-content-list-and-save
category: blog
tags: [archive]
---
<p>On a recent client project, I imported several hundred nodes from a legacy system. &nbsp;The problem was, when looking at the individual nodes, the titles didn&#39;t appear. &nbsp;After hitting edit and then save on that node though, the title would show up.</p><p>After spending some time trying to figure out where the logic was that was killing my titles, I decided to try fixing this another way. &nbsp;I first tried a variety of save commands through <a href="http://drupal.org/project/views_bulk_operations">VBO</a>, but sadly unpublish/publish, changing authors, nor just resaving all the nodes fixed my issue, leading me to think that the nodes needed some piece of content (even if blank or null) from the node submission form. &nbsp;</p><p>Stymied from a more elegant solution, with my deadline looming, I turned to my old friend, the<a href="https://addons.mozilla.org/en-US/firefox/addon/imacros-for-firefox/"> iMacros Firefox extension</a>. &nbsp;For those unfamiliar, it allows you to record macros in your browser and then loop them in an automated fashion. &nbsp;I recorded what the macro looked like to load the /admin/content screen, hit the edit link and then hit save on the resulting screen. &nbsp;This is what that looked like:</p><blockquote><div>TAB T=1</div><div>URL GOTO=http://CLIENTDOMAIN/admin/content<br />&nbsp;</div><div>TAG POS=1 &nbsp;TYPE=A ATTR=TXT:edit</div><div>TAG POS=1 TYPE=INPUT:SUBMIT FORM=ID:press-release-node-form ATTR=ID:edit-submit</div></blockquote><div>This was all hunky dory, but would only do it for the top node on the content list. &nbsp;I had to find a looping variable. &nbsp;Enter the {{!LOOP}} variable. &nbsp;All I had to do was change the position tag of the first instruction to correspond to the loop iteration number and my browser was off to the races:</div><div><blockquote><div>TAB T=1</div><div>URL GOTO=http://CLIENTDOMAIN/admin/content</div><div>&nbsp;</div><div>TAG POS={{!LOOP}} &nbsp;TYPE=A ATTR=TXT:edit</div><div>TAG POS=1 TYPE=INPUT:SUBMIT FORM=ID:press-release-node-form ATTR=ID:edit-submit</div></blockquote></div><div>Sadly this is a slower than I might like, but in the time its taken me to write this post, my browser has looped through this macro 50 times, so it is acceptably low involvement that I think I can use it to finish out this project. &nbsp;Drop me a line if you have ideas as to why the nodes wouldn&#39;t show the tile without manually saving it through the browser!</div>